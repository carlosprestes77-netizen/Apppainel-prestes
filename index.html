<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#d7b478">
<link rel="manifest" href="manifest.webmanifest">

<title>Painel Prestes</title>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,Arial}
body{
  background:#1d1814;
  color:#f3e7d6;
  padding:16px;
}

header{
  display:flex;
  align-items:center;
  gap:12px;
  margin-bottom:20px;
}

.logo{
  width:58px;
  height:58px;
  border-radius:16px;
  background:linear-gradient(145deg,#fdf7ec,#c6a87a);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  font-weight:900;
  color:#1a1a1a;
}

h1{
  font-size:26px;
  font-weight:800;
}

.tabs{
  display:flex;
  gap:12px;
  margin-bottom:22px;
}

.tab{
  flex:1;
  text-align:center;
  padding:10px 14px;
  border-radius:12px;
  background:#302820;
  color:#e8d6b8;
  font-size:17px;
  font-weight:600;
  border:1px solid #473a2d;
}

.tab.active{
  background:#d7b478;
  color:#1d1814;
}

/* CONTAINER */
.card{
  background:#2b241e;
  border:1px solid #463a2e;
  border-radius:18px;
  padding:18px;
  margin-bottom:20px;
}

/* BOT√ÉO */
.btn{
  margin-top:14px;
  background:#d7b478;
  color:#1d1814;
  font-weight:700;
  padding:14px 20px;
  border:none;
  border-radius:14px;
  font-size:16px;
  width:100%;
}

.calendar{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:10px;
  margin-top:12px;
}

.day{
  background:#3a3128;
  padding:14px 0;
  border-radius:14px;
  text-align:center;
  font-size:15px;
  font-weight:600;
  color:#f1e3c9;
}

.day.has{
  background:#d7b478;
  color:#1d1a18;
  font-weight:900;
}

.monthHeader{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:12px;
  font-size:20px;
  font-weight:700;
}

.monthBtn{
  background:none;
  border:none;
  color:#d7b478;
  font-size:26px;
  padding:6px;
}

/* INPUTS */
input, select{
  width:100%;
  margin-bottom:12px;
  padding:12px;
  background:#3a3128;
  border:1px solid #574938;
  border-radius:12px;
  color:#f1e3c9;
  font-size:16px;
}

.lista{
  display:flex;
  flex-direction:column;
  gap:12px;
  margin-top:12px;
}

.item{
  background:#3b3229;
  padding:14px;
  border-radius:12px;
  border:1px solid #4d4033;
}

.itemHeader{
  display:flex;
  justify-content:space-between;
  font-weight:700;
}

</style>
</head>

<body>

<header>
  <div class="logo">CP</div>
  <h1>Painel Prestes</h1>
</header>

<div class="tabs">
  <div class="tab active" id="tabDashboard">Dashboard</div>
  <div class="tab" id="tabDividas">D√≠vidas</div>
  <div class="tab" id="tabEventos">Eventos</div>
</div>

<div id="telaDashboard"></div>
<div id="telaDividas" style="display:none"></div>
<div id="telaEventos" style="display:none"></div>

<script>
   // ----------------------
// DATA STORAGE
// ----------------------
let dividas = JSON.parse(localStorage.getItem("dividas") || "[]");
let eventos = JSON.parse(localStorage.getItem("eventos") || "[]");

// ----------------------
// TABS
// ----------------------
function showTab(t){
  document.getElementById("telaDashboard").style.display = t==="dash"?"block":"none";
  document.getElementById("telaDividas").style.display = t==="div"?"block":"none";
  document.getElementById("telaEventos").style.display = t==="eve"?"block":"none";

  document.getElementById("tabDashboard").classList.toggle("active", t==="dash");
  document.getElementById("tabDividas").classList.toggle("active", t==="div");
  document.getElementById("tabEventos").classList.toggle("active", t==="eve");
}

document.getElementById("tabDashboard").onclick = ()=>showTab("dash");
document.getElementById("tabDividas").onclick = ()=>showTab("div");
document.getElementById("tabEventos").onclick = ()=>showTab("eve");

// ----------------------
// DASHBOARD
// ----------------------
function renderDashboard(){
  let total = dividas.reduce((s,x)=>s+Number(x.valor),0);
  let recebido = dividas.reduce((s,x)=>s+Number(x.recebido||0),0);
  let falta = total - recebido;

  document.getElementById("telaDashboard").innerHTML = `
    <div class='card'>
      <h2>Resumo Financeiro</h2>
      <p>Total no m√™s: <b>R$ ${total.toFixed(2)}</b></p>
      <p>Recebido: <b>R$ ${recebido.toFixed(2)}</b></p>
      <p>Falta receber: <b>R$ ${falta.toFixed(2)}</b></p>
      <button class='btn'>üìÑ Gerar PDF do m√™s</button>
    </div>
  `;
}

// ----------------------
// D√çVIDAS
// ----------------------
function renderDividas(){
  document.getElementById("telaDividas").innerHTML = `
    <div class='card'>
      <h2>Adicionar d√≠vida</h2>
      <input id='dNome' placeholder='Nome da d√≠vida'>
      <input id='dDesc' placeholder='Descri√ß√£o'>
      <input id='dValor' placeholder='Valor (ex: 450)'>
      <button class='btn' onclick='addDivida()'>Adicionar</button>
    </div>

    <div class='card'>
      <h2>Minhas d√≠vidas</h2>
      <div class='lista'>
        ${dividas.map(d=>`
          <div class='item'>
            <div class='itemHeader'>
              <span>${d.nome}</span>
              <b>R$ ${d.valor}</b>
            </div>
            <p>${d.descricao}</p>
          </div>
        `).join("")}
      </div>
    </div>
  `;
}

function addDivida(){
  const nome=document.getElementById("dNome").value;
  const desc=document.getElementById("dDesc").value;
  const valor=Number(document.getElementById("dValor").value);

  if(!nome||!valor) return alert("Preencha nome e valor!");

  dividas.push({nome,descricao:desc,valor,recebido:0});
  localStorage.setItem("dividas",JSON.stringify(dividas));
  renderDividas();
  renderDashboard();
}

// ----------------------
// EVENTOS
// ----------------------
let mesAtual = new Date().getMonth();
let anoAtual = new Date().getFullYear();

function renderEventos(){
  const meses=["Janeiro","Fevereiro","Mar√ßo","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];

  let primeiro = new Date(anoAtual,mesAtual,1).getDay();
  let dias = new Date(anoAtual,mesAtual+1,0).getDate();

  let html = `
    <div class='card'>
      <div class='monthHeader'>
        <button class='monthBtn' onclick='mesAtual--;renderEventos()'>&larr;</button>
        ${meses[mesAtual]} ${anoAtual}
        <button class='monthBtn' onclick='mesAtual++;renderEventos()'>&rarr;</button>
      </div>

      <div class='calendar'>
        ${"<div></div>".repeat(primeiro)}
        ${Array.from({length:dias},(_,i)=>`
          <div class='day' onclick='addEvento(${i+1})'>
            ${i+1}
          </div>
        `).join("")}
      </div>
    </div>

    <div class='card'>
      <h2>Eventos</h2>
      <div class='lista'>
        ${eventos.map(e=>`
          <div class='item'>
            <div class='itemHeader'>
              <span>${e.data}</span>
              <b>R$ ${e.recebido}</b>
            </div>
            <p>${e.descricao}</p>
          </div>
        `).join("")}
      </div>
    </div>
  `;

  document.getElementById("telaEventos").innerHTML = html;
}

function addEvento(dia){
  let descricao=prompt("Descri√ß√£o:");
  let valor = prompt("Valor recebido:");
  if(!descricao||!valor) return;
  eventos.push({data:dia+"/"+(mesAtual+1)+"/"+anoAtual,descricao,recebido:Number(valor)});
  localStorage.setItem("eventos",JSON.stringify(eventos));
  renderEventos();
  renderDashboard();
}
// ----------------------
// INICIALIZA√á√ÉO
// ----------------------
renderDashboard();
renderDividas();
renderEventos();

// ----------------------
// PWA
// ----------------------
if("serviceWorker" in navigator){
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
