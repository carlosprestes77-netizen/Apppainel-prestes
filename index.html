<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#1e1a17" />

<title>Painel Prestes</title>

<!-- =======================
     ESTILOS PREMIUM
======================= -->
<style>
:root {
  --bg: #f4ede4;
  --bg2: rgba(255,255,255,0.45);
  --text: #2a2a2a;
  --subtext: #6f6f6f;
  --accent: #b89b72;
  --accent-strong: #a27f53;
  --border: rgba(0,0,0,0.08);
  --radius: 18px;
  --transition: 0.25s ease;
}

/* DARK MODE */
[data-theme="dark"] {
  --bg: #1e1a17;
  --bg2: rgba(255,255,255,0.06);
  --text: #f3e9d8;
  --subtext: #b8a894;
  --accent: #d0b185;
  --accent-strong: #e6cfa3;
  --border: rgba(255,255,255,0.1);
}

body {
  margin: 0;
  padding: 24px;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro", sans-serif;
  background: var(--bg);
  color: var(--text);
  overflow-x: hidden;
  position: relative;
}

/* fundo parallax */
.bg-parallax {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle at 30% 40%,
      rgba(255,230,200,0.55),
      rgba(230,200,160,0.4),
      rgba(200,170,140,0.35),
      rgba(150,120,90,0.2),
      rgba(0,0,0,0.05)
  );
  filter: blur(45px);
  transform: scale(1.5);
  transition: transform 0.15s ease-out;
  z-index: -2;
}

.bg-parallax-top {
  position: fixed;
  inset: 0;
  background: linear-gradient(135deg,
      rgba(255,255,255,0.05),
      rgba(255,255,255,0)
  );
  z-index: -1;
}

.app {
  max-width: 1000px;
  margin: auto;
  padding: 24px;
  background: var(--bg2);
  border-radius: 28px;
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  box-shadow: 0 25px 45px rgba(0,0,0,0.18);
  animation: fadeIn 0.8s ease forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* CABEÇALHO */
.header {
  display: flex;
  align-items: center;
  gap: 14px;
  margin-bottom: 20px;
}

.logoCP {
  width: 58px;
  height: 58px;
  border-radius: 18px;
  background: linear-gradient(145deg,#d8c3a6,#f8e8ce);
  box-shadow:
    inset -3px -3px 6px rgba(255,255,255,0.6),
    inset 3px 3px 6px rgba(0,0,0,0.15),
    0 10px 20px rgba(0,0,0,0.2);
  color: #4a3820;
  font-size: 1.75rem;
  font-weight: 700;
  display: flex;
  justify-content: center;
  align-items: center;
}

h1 { margin: 0; font-size: 1.9rem; }

/* TABS */
.tabs {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
  padding-bottom: 8px;
  border-bottom: 1px solid var(--border);
}

.tab {
  padding: 10px 18px;
  cursor: pointer;
  border-radius: var(--radius);
  color: var(--subtext);
  transition: var(--transition);
}

.tab.active {
  background: var(--accent);
  color: #fff;
}

/* SEÇÕES */
.section {
  display: none;
  padding: 24px;
  border-radius: var(--radius);
  background: rgba(255,255,255,0.12);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--border);
  animation: sectionIn 0.5s ease forwards;
}

.section.active { display: block; }

@keyframes sectionIn {
  from { opacity: 0; transform: translateY(18px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* INPUTS */
label {
  display: block;
  margin-top: 10px;
  color: var(--subtext);
  font-size: 0.9rem;
}

input, select {
  width: 100%;
  padding: 12px;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.2);
  color: var(--text);
  margin-top: 4px;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  transition: var(--transition);
}

input:focus {
  border-color: var(--accent);
}

/* BUTTON */
button {
  margin-top: 16px;
  padding: 14px;
  width: 100%;
  border: none;
  border-radius: var(--radius);
  background: var(--accent);
  color: #fff;
  font-size: 1.1rem;
  cursor: pointer;
  transition: var(--transition);
}

button:hover {
  background: var(--accent-strong);
  transform: translateY(-2px);
}

/* CALENDÁRIO */
.calendar-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 14px;
}

#prevMonth, #nextMonth {
  font-size: 1.5rem;
  background: transparent;
  border: none;
  color: var(--subtext);
  border-radius: 50%;
  padding: 4px 10px;
  transition: var(--transition);
}

#prevMonth:hover, #nextMonth:hover {
  background: rgba(255,255,255,0.15);
}

#calendar {
  display: grid;
  grid-template-columns: repeat(7,1fr);
  gap: 8px;
}

.weekday {
  text-align: center;
  color: var(--subtext);
}

.day {
  min-height: 78px;
  padding: 8px;
  border-radius: 16px;
  background: rgba(255,255,255,0.15);
  transition: var(--transition);
  cursor: pointer;
}

.day:hover { border: 1px solid var(--accent); }

.day.selected {
  border: 1px solid var(--accent-strong);
  box-shadow: 0 0 10px rgba(0,0,0,0.25);
}

.event-pill {
  margin-top: 4px;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: .75rem;
  color: white;
  background: rgba(0,0,0,0.25);
}

.event-pill.paid { background: rgba(50,200,50,0.35); }
.event-pill.pending { background: rgba(255,150,30,0.35); }

/* ================================
   TELA DE CARREGAMENTO PREMIUM
=================================*/
#loader {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle at 40% 40%,
      rgba(255,235,205,0.65),
      rgba(210,180,140,0.55),
      rgba(120,90,60,0.35),
      rgba(30,25,23,0.9)
  );
  backdrop-filter: blur(22px);
  -webkit-backdrop-filter: blur(22px);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  animation: loaderFadeOut 1.3s ease forwards;
  animation-delay: 1.3s;
}

.loader-logo {
  font-size: 4rem;
  font-weight: 800;
  color: #f2e6d2;
  text-shadow: 0 0 25px rgba(255,255,255,0.7),
               0 0 45px rgba(240,210,170,0.4),
               0 0 80px rgba(240,210,170,0.25);
  animation: glowPulse 1.6s infinite ease-in-out;
  letter-spacing: 2px;
}

@keyframes glowPulse {
  0%   { transform: scale(1);   opacity: 0.85; }
  50%  { transform: scale(1.08); opacity: 1; }
  100% { transform: scale(1);   opacity: 0.85; }
}

@keyframes loaderFadeOut {
  to {
    opacity: 0;
    visibility: hidden;
  }
}
</style>
</head>

<body data-theme="dark">

<!-- ================================
     LOADING SCREEN
=================================-->
<div id="loader">
  <div class="loader-logo">CP</div>
</div>

<div class="bg-parallax"></div>
<div class="bg-parallax-top"></div>

<div class="app">

<!-- HEADER -->
<div class="header">
  <div class="logoCP">CP</div>
  <h1>Painel Prestes</h1>
</div>

<!-- TABS -->
<div class="tabs">
  <div class="tab active" data-tab="dividas">Dívidas</div>
  <div class="tab" data-tab="eventos">Eventos</div>
</div>

<!-- DÍVIDAS -->
<div id="dividas" class="section active">
  <label>Nome</label>
  <input id="divNome">

  <label>Descrição</label>
  <input id="divDesc">

  <label>Valor</label>
  <input id="divValor">

  <button onclick="addDivida()">Adicionar</button>

  <div id="listaDividas" style="margin-top:20px;"></div>
</div>

<!-- EVENTOS -->
<div id="eventos" class="section">

  <div class="calendar-nav">
    <button id="prevMonth">←</button>
    <div id="monthLabel"></div>
    <button id="nextMonth">→</button>
  </div>

  <div id="calendar"></div>

  <label style="margin-top:22px;">Data</label>
  <input id="eventDate" readonly>

  <label>Empresa</label>
  <input id="eventEmp">

  <label>Serviço</label>
  <input id="eventServ">

  <label>Valor</label>
  <input id="eventVal">

  <label>Recebido parcial</label>
  <input id="eventRec">

  <label>Pago totalmente?</label>
  <select id="eventPago">
    <option value="nao">Não</option>
    <option value="sim">Sim</option>
  </select>

  <button onclick="addEvento()">Adicionar evento</button>

  <div id="listaEventos" style="margin-top:20px;"></div>
</div>

</div>

<!-- =======================
     JAVASCRIPT
======================= -->
<script>
// tabs
document.querySelectorAll(".tab").forEach(t=>{
  t.onclick=()=>{
    document.querySelectorAll(".tab").forEach(x=>x.classList.remove("active"));
    document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
    t.classList.add("active");
    document.getElementById(t.dataset.tab).classList.add("active");
  };
});

// dividas
function addDivida(){
  let nome=divNome.value;
  let desc=divDesc.value;
  let val=parseFloat(divValor.value.replace(",","."));

  if(!nome || isNaN(val)) return alert("Preencha tudo direito, Prestes.");

  let d=JSON.parse(localStorage.getItem("dividas")||"[]");
  d.push({nome,desc,val});
  localStorage.setItem("dividas",JSON.stringify(d));

  atualizarDividas();
  divNome.value=""; divDesc.value=""; divValor.value="";
}

function atualizarDividas(){
  let d=JSON.parse(localStorage.getItem("dividas")||"[]");
  if(d.length===0){ listaDividas.innerHTML="<p>Nenhuma dívida.</p>"; return; }

  let h="";
  d.forEach(e=>{
    h+=`<div style="padding:14px;border:1px solid var(--border);border-radius:var(--radius);margin-bottom:12px;">
      <strong>${e.nome}</strong><br>${e.desc}<br>
      <span style="color:var(--accent)">R$ ${e.val.toFixed(2)}</span>
    </div>`;
  });
  listaDividas.innerHTML=h;
}

// eventos
function addEvento(){
  let data=eventDate.value;
  let empresa=eventEmp.value;
  let serv=eventServ.value;
  let val=parseFloat(eventVal.value.replace(",","."));
  let rec=parseFloat(eventRec.value.replace(",",".")||0);
  let pago=eventPago.value;

  if(!data || !empresa || !serv || isNaN(val))
    return alert("Preenche tudo certo, Prestes.");

  let e=JSON.parse(localStorage.getItem("eventos")||"[]");
  e.push({data,empresa,serv,val,recebido:rec,pago});
  localStorage.setItem("eventos",JSON.stringify(e));

  atualizarListaEventos();
  renderCalendar();
}

function atualizarListaEventos(){
  let e=JSON.parse(localStorage.getItem("eventos")||"[]");

  if(e.length===0){ listaEventos.innerHTML="<p>Nenhum evento.</p>"; return;}

  let h="";
  e.forEach(ev=>{
    h+=`
    <div style="padding:14px;border:1px solid var(--border);border-radius:var(--radius);margin-bottom:12px;">
      <strong>${ev.empresa}</strong> – ${ev.serv}<br>
      ${ev.data}<br>
      <span style="color:var(--accent)">R$ ${ev.val.toFixed(2)}</span><br>
      Recebido: R$ ${ev.recebido}<br>
      Pago: ${ev.pago==="sim"?"✔":"❌"}
    </div>`;
  });

  listaEventos.innerHTML=h;
}

// calendário
let currentDate=new Date();

function renderCalendar(){
  calendar.innerHTML="";

  const year=currentDate.getFullYear();
  const month=currentDate.getMonth();

  const firstDay=new Date(year,month,1);
  const lastDay=new Date(year,month+1,0);
  const firstWeekday=firstDay.getDay();

  const nomes=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];
  monthLabel.textContent=nomes[month]+" "+year;

  const diasSemana=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"];
  diasSemana.forEach(w=>{
    let wd=document.createElement("div");
    wd.className="weekday";
    wd.textContent=w;
    calendar.appendChild(wd);
  });

  for(let i=0;i<firstWeekday;i++){
    let empty=document.createElement("div");
    empty.className="day empty";
    calendar.appendChild(empty);
  }

  let eventos=JSON.parse(localStorage.getItem("eventos")||"[]");

  for(let d=1;d<=lastDay.getDate();d++){
    let box=document.createElement("div");
    box.className="day";
    const dateStr=`${year}-${String(month+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`;

    box.innerHTML=`<strong>${d}</strong>`;

    let dayEvents=eventos.filter(e=>e.data===dateStr);
    dayEvents.forEach(ev=>{
      let pill=document.createElement("div");
      pill.className="event-pill";
      if(ev.pago==="sim") pill.classList.add("paid");
      if(ev.recebido>0&&ev.pago==="nao") pill.classList.add("pending");
      pill.textContent=ev.empresa;
      box.appendChild(pill);
    });

    box.addEventListener("click",()=>{
      document.querySelectorAll(".day.selected").forEach(el=>el.classList.remove("selected"));
      box.classList.add("selected");
      eventDate.value=dateStr;
      eventDate.scrollIntoView({behavior:"smooth"});
    });

    calendar.appendChild(box);
  }
}

prevMonth.onclick=()=>{ currentDate.setMonth(currentDate.getMonth()-1); renderCalendar(); };
nextMonth.onclick=()=>{ currentDate.setMonth(currentDate.getMonth()+1); renderCalendar(); };

renderCalendar();
atualizarDividas();
atualizarListaEventos();

/* PARALLAX COM O TOQUE */
document.addEventListener("mousemove",e=>{
  const x=(e.clientX/window.innerWidth - 0.5)*20;
  const y=(e.clientY/window.innerHeight - 0.5)*20;
  document.querySelector(".bg-parallax").style.transform=
    `translate(${x}px,${y}px) scale(1.5)`;
});

/* LOADING SCREEN */
window.addEventListener("load", () => {
  const loader = document.getElementById("loader");
  setTimeout(() => {
    loader.style.display = "none";
  }, 1800);
});
</script>

</body>
</html>
